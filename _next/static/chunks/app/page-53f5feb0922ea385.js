(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1097:function(e,l,c){Promise.resolve().then(c.bind(c,7039))},7039:function(e,l,c){"use strict";c.r(l),c.d(l,{default:function(){return g}});var t=c(6943),r=c(7879),s=c(9906),i=c(9008),a=c(2245),n=c(8926),o=c(7380),d=c(2107),u=c.n(d),h=e=>{let{onLongPress:l,onClick:c,onBlur:s,children:i,disabled:a=!1}=e,[n,d]=(0,r.useState)(null),[h,x]=(0,r.useState)(!1),m=(0,r.useCallback)(u().debounce(()=>{x(!0)},300),[]);(0,r.useEffect)(()=>()=>{n&&clearTimeout(n),m.cancel()},[n,m]);let P=()=>{m(),d(setTimeout(()=>{h&&(l(),x(!1))},500))},p=()=>{n&&clearTimeout(n),m.cancel(),x(!1)};return(0,t.jsx)(o.ZP,{onMouseDown:P,onMouseUp:p,onMouseLeave:p,onTouchStart:P,onTouchEnd:p,onClick:c,onBlur:s,className:"w-[48px] h-[48px] flex items-center justify-center",style:{fontSize:"16px",backgroundColor:h?"#ddd":"#fff"},disabled:a,children:i})},x=e=>{let{min:l=0,max:c=100,step:i=1,name:o,value:d,setValue:u,disabled:x=!1,disabledDecrease:m=!1,disabledIncrease:P=!1,onChange:p,onFocus:j,onBlur:f}=e,g=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(g.current){let e=new Event("input",{bubbles:!0});g.current.value=String(d),g.current.dispatchEvent(e)}},[d]),(0,t.jsxs)(s.Z,{onBlur:f,onFocus:j,gap:8,children:[(0,t.jsx)(h,{onLongPress:()=>{alert("long press")},disabled:m,onClick:()=>{u(e=>e-i)},children:(0,t.jsx)(a.Z,{})}),(0,t.jsx)("input",{ref:g,min:l,max:c,name:o,step:i,value:d,onInput:p,className:"text-center w-[48px] h-[48]",disabled:x}),(0,t.jsx)(h,{onLongPress:()=>{alert("long press")},disabled:P,onClick:()=>{u(e=>e+i)},children:(0,t.jsx)(n.Z,{})})]})},m=e=>{let{adult:l,child:c,step:i,capacity:a,restOfAllocatedAdults:n,restOfAllocatedChildren:o,onChange:d,onBlur:u,onFocus:h}=e,[m,P]=(0,r.useState)(l),[p,j]=(0,r.useState)(c);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Z,{justify:"space-between",align:"center",className:"w-full",children:[(0,t.jsx)("div",{children:"大人"}),(0,t.jsx)(x,{min:0,max:30,step:i,name:"adult",value:m,setValue:P,disabled:!1,disabledDecrease:m<=0,disabledIncrease:m+p>=a||n<=0,onChange:d,onFocus:h,onBlur:u})]}),(0,t.jsxs)(s.Z,{justify:"space-between",align:"center",className:"w-full",children:[(0,t.jsx)("div",{children:"小孩"}),(0,t.jsx)(x,{min:0,max:30,step:i,name:"child",value:p,setValue:j,disabled:!1,disabledDecrease:p<=0,disabledIncrease:m+p>=a||o<=0,onChange:d,onFocus:h,onBlur:u})]})]})},P=e=>{let{currentTest:l,onChange:c}=e,[i,a]=(0,r.useState)(0),[n,o]=(0,r.useState)(null),[d,u]=(0,r.useState)([]),[h,x]=(0,r.useState)([]),[P,p]=(0,r.useState)(0),[j,f]=(0,r.useState)(0),g=(e,l)=>{let{name:t,value:r}=e.target;console.log("[onChange]",t,r);let s=[...h];c(s),x(s)},b=(0,r.useCallback)((e,l)=>{let c=[];l.sort((e,l)=>e.roomPrice+e.adultPrice+e.childPrice-(l.roomPrice+l.adultPrice+l.childPrice));for(let e=0;e<l.length;e++){let t=P>=0?1:0;c.push({adult:t,child:0,price:l[e].roomPrice+l[e].adultPrice*t+0*l[e].childPrice})}return c},[P]);return(0,r.useEffect)(()=>{a(1)},[]),(0,r.useEffect)(()=>{let{guest:e,rooms:c}=l;o(e),u(c),p(e.adult),f(e.child),x(b(e,c)||[])},[l,b]),(0,t.jsxs)(s.Z,{vertical:!0,children:[n&&d.length>0&&(0,t.jsx)(s.Z,{children:(0,t.jsxs)(s.Z,{className:"text-2xl font-bold",children:[(0,t.jsx)("h2",{children:"住客人數："}),n.adult," 位大人，",n.child," 位小孩 / ",d.length," 房"]})}),(0,t.jsx)(s.Z,{vertical:!0,children:(0,t.jsxs)(s.Z,{className:"text-base bg-slate-200 w-full mt-2 p-4",children:[(0,t.jsx)("h2",{children:"尚未分配人數："}),P," 位大人，",j," 位小孩"]})}),(0,t.jsx)(s.Z,{vertical:!0,className:"text-lg font-bold mb-4 divide-y",children:h.map((e,l)=>(0,t.jsx)(s.Z,{vertical:!0,className:"text-lg font-bold mb-4 py-4",children:(0,t.jsxs)(s.Z,{vertical:!0,gap:8,children:[(0,t.jsxs)("h3",{children:["房間 ",l+1,"："]}),(0,t.jsx)(m,{adult:e.adult,child:e.child,capacity:d[l].capacity,step:i,restOfAllocatedAdults:P,restOfAllocatedChildren:j,onChange:e=>g(e,l),onFocus:e=>{},onBlur:e=>{}}),(0,t.jsxs)("div",{children:["價格: ",e.price]})]})},l))})]})},p=e=>{let{currentTest:l}=e;return(0,t.jsx)(i.Z,{style:{width:500},children:(0,t.jsx)(P,{currentTest:l,onChange:e=>{console.log("RoomAllocation:[onChange]",e)}})})};let j=[{guest:{adult:4,child:2},rooms:[{roomPrice:1e3,adultPrice:200,childPrice:100,capacity:4},{roomPrice:0,adultPrice:500,childPrice:500,capacity:4},{roomPrice:500,adultPrice:300,childPrice:200,capacity:4}]},{guest:{adult:16,child:0},rooms:[{roomPrice:500,adultPrice:500,childPrice:300,capacity:4},{roomPrice:500,adultPrice:500,childPrice:300,capacity:4},{roomPrice:0,adultPrice:500,childPrice:300,capacity:8},{roomPrice:500,adultPrice:1e3,childPrice:600,capacity:2}]},{guest:{adult:0,child:1},rooms:[{roomPrice:1e3,adultPrice:500,childPrice:300,capacity:2},{roomPrice:500,adultPrice:400,childPrice:300,capacity:4},{roomPrice:0,adultPrice:500,childPrice:300,capacity:8}]}];var f=e=>{let{currentTest:l,setCurrentTest:c}=e;return(0,t.jsx)(s.Z,{gap:8,children:j.map((e,l)=>(0,t.jsx)(o.ZP,{onClick:()=>{console.log("[TestCaseBar]",e),c(e)},children:"testCase ".concat(l+1)},l))})},g=()=>{let[e,l]=(0,r.useState)(j[0]);return(0,t.jsxs)(s.Z,{vertical:!0,gap:"large",align:"center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"YOSHI YOSHI"}),(0,t.jsx)(f,{currentTest:e,setCurrentTest:l}),(0,t.jsx)(p,{currentTest:e})]})}}},function(e){e.O(0,[495,787,922,465,744],function(){return e(e.s=1097)}),_N_E=e.O()}]);